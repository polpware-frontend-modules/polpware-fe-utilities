{"version":3,"file":"polpware-fe-utilities.mjs","sources":["../../../../projects/polpware/fe-utilities/src/lib/tools/math.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/url.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/arr.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/str.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/set.ts","../../../../projects/polpware/fe-utilities/src/lib/typing/type-checker.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/hash.ts","../../../../projects/polpware/fe-utilities/src/lib/tools/date.ts","../../../../projects/polpware/fe-utilities/src/lib/typing/type-cast.ts","../../../../projects/polpware/fe-utilities/src/lib/promise/promise-like.ts","../../../../projects/polpware/fe-utilities/src/lib/promise/monadic-operations.ts","../../../../projects/polpware/fe-utilities/src/lib/promise/inter-op.ts","../../../../projects/polpware/fe-utilities/src/polpware-fe-utilities.ts"],"sourcesContent":["/**\r\n * Generates a guid.\r\n */\r\nexport function guid() {\r\n    let d = new Date().getTime();\r\n    const uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {\r\n        const r = (d + Math.random() * 16) % 16 | 0;\r\n        d = Math.floor(d / 16);\r\n        return (c === 'x' ? r : (r & 0x7 | 0x8)).toString(16);\r\n    });\r\n    return uuid;\r\n}\r\n\r\n/**\r\n * Generates a random number between the given range\r\n */\r\nexport function getRandomInt(min, max) {\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}\r\n","/**\r\n * Encodes a key-value pair, where a value can be an array.\r\n */\r\nexport function urlEncodePair(key: string, value: any, str: Array<string>): void {\r\n    if (value instanceof Array) {\r\n        value.forEach((item) => {\r\n            str.push(encodeURIComponent(key) + '[]=' + encodeURIComponent(item));\r\n        });\r\n    } else {\r\n        str.push(encodeURIComponent(key) + '=' + encodeURIComponent(value));\r\n    }\r\n}\r\n\r\n/**\r\n * Encodes an object in www form.\r\n */\r\nexport function urlEncode(data: Object): string {\r\n    const str: Array<string> = [];\r\n    for (let p in data) {\r\n        if (data.hasOwnProperty(p)) {\r\n            urlEncodePair(p, data[p], str);\r\n        }\r\n    }\r\n    return str.join('&').replace(/%20/g, '+');\r\n}\r\n\r\nexport function getParamByName(name: string, url: string): string | null {\r\n    name = name.replace(/[\\[\\]]/g, '\\\\$&');\r\n    const regex = new RegExp('[?#&]' + name + '(=([^&#]*)|&|#|$)');\r\n    const results = regex.exec(url);\r\n    if (!results) {\r\n        return null;\r\n    }\r\n    if (!results[2]) {\r\n        return '';\r\n    }\r\n    return decodeURIComponent(results[2].replace(/\\+/g, ' '));\r\n}\r\n\r\nexport function getQueryParamByName(name: string, url?: string): string | null {\r\n    if (!url) {\r\n        url = window.location.href;\r\n    }\r\n    return getParamByName(name, url);\r\n}\r\n\r\nexport function getHashParamByName(name: string, url?: string): string | null {\r\n    if (!url) {\r\n        url = window.location.hash;\r\n    }\r\n    return getParamByName(name, url);\r\n}\r\n","/**\r\n * Pushs an array or a single value into the thisArg;\r\n */\r\nexport function pushArray<T>(thisArg: Array<T>, src: Array<T> | T): void {\r\n    if (!(src instanceof Array)) {\r\n        thisArg.push(src);\r\n        return;\r\n    }\r\n\r\n    src.forEach(function(item) {\r\n        thisArg.push(item);\r\n    });\r\n}\r\n\r\n/**\r\n * Turns the values in an object into an array\r\n */\r\nexport function makeArray(o: Object) {\r\n    const ret = [];\r\n    for (let n in o) {\r\n        if (o.hasOwnProperty(n)) {\r\n            ret.push(o[n]);\r\n        }\r\n    }\r\n    return ret;\r\n}\r\n","/**\r\n * Replaces the placeholders a given format with the given parameters.\r\n */\r\nexport function replace(format: string, params: { [key: string]: any }): string {\r\n    /*jslint unparam: true */\r\n    return format.replace(/\\{([a-zA-Z]+)\\}/g, function(s, key) {\r\n        return (typeof params[key] === 'undefined') ? '' : params[key];\r\n    });\r\n}\r\n\r\n/**\r\n * Transforms the given string into one where\r\n * some characters have been properly replaced with\r\n * their escape versions.\r\n */\r\nexport function applyEscape(data: string): string {\r\n    data = data\r\n        .replace(/[\\\\]/g, '\\\\\\\\')\r\n        .replace(/[\\\"]/g, '\\\\\\\"')\r\n        .replace(/[\\/]/g, '\\\\/')\r\n        .replace(/[\\b]/g, '\\\\b')\r\n        .replace(/[\\f]/g, '\\\\f')\r\n        .replace(/[\\n]/g, '\\\\n')\r\n        .replace(/[\\r]/g, '\\\\r')\r\n        .replace(/[\\t]/g, '\\\\t');\r\n    return data;\r\n}\r\n\r\n/**\r\n * Undo the work by applyEscape. It replaces the escape\r\n * characters with their unescaped ones.\r\n */\r\nexport function reverseEscape(data: string): string {\r\n    data = data\r\n        .replace(/\\\\\\\\/g, '\\\\')\r\n        .replace(/\\\\\\\"/g, '\\\"')\r\n        .replace(/\\\\\\//g, '\\/')\r\n        .replace(/\\\\\\b/g, '\\b')\r\n        .replace(/\\\\\\f/g, '\\f')\r\n        .replace(/\\\\\\n/g, '\\n')\r\n        .replace(/\\\\\\r/g, '\\r')\r\n        .replace(/\\\\\\t/g, '\\t');\r\n    return data;\r\n}\r\n","// firstSet - secondSet (any element not in secondSet)\r\nexport function diff<T, U>(firstSet: Array<T>,\r\n    secondSet: Array<U>,\r\n    predicate: (firstElem: T, secondElem: U) => boolean): Array<T> {\r\n    return firstSet.filter((x: T) => {\r\n        return !secondSet.some((y: U) => {\r\n            return predicate(x, y);\r\n        });\r\n    });\r\n}\r\n\r\n// firstSet intersection secondSet\r\nexport function intersection<T, U>(firstSet: Array<T>,\r\n    secondSet: Array<U>,\r\n    predicate: (firstElem: T, secondElem: U) => boolean): Array<T> {\r\n    return firstSet.filter((x: T) => {\r\n        return secondSet.some((y: U) => {\r\n            return predicate(x, y);\r\n        });\r\n    });\r\n}\r\n","/*\r\nBasicTypes := \r\n    boolean \r\n  | number \r\n  | string \r\n  | date\r\n  | symbol\r\n  | null\r\n  | undefined\r\n  | array \r\n  | object\r\n  | function\r\n*/\r\n\r\n\r\nexport function isBoolean(x: any): x is boolean {\r\n    return typeof x === 'boolean';\r\n}\r\n\r\nexport function isNumber(x: any): x is number {\r\n    return typeof x === 'number';\r\n}\r\n\r\nexport function isString(x: any): x is string {\r\n    return typeof x === 'string';\r\n}\r\n\r\nexport function isDate(x: any): x is Object {\r\n    return Object.prototype.toString.call(x) === '[object Date]';\r\n}\r\n\r\nexport function isSymbol(x: any): x is symbol {\r\n    return typeof x === 'symbol';\r\n}\r\n\r\nexport function isNull(x: any): x is null {\r\n    return x === null;\r\n}\r\n\r\nexport function isUndefined(x: any): x is undefined {\r\n    return x === undefined;\r\n}\r\n\r\nexport function isArray(x: any): x is Array<any> {\r\n    return x instanceof Array;\r\n}\r\n\r\nexport function isObject(x: any): x is Object {\r\n    return typeof x === 'object';\r\n}\r\n\r\nexport function isFunction(x: any): x is Function {\r\n    return typeof x === 'function';\r\n}\r\n\r\nexport interface ITypeDef {\r\n    name: string,\r\n    val: any,\r\n    pred: (any) => boolean\r\n};\r\n\r\nexport const tyBool: ITypeDef = { name: 'Boolean', val: false, pred: isBoolean };\r\nexport const tyNull: ITypeDef = { name: 'Null', val: null, pred: isNull };\r\nexport const tyUndefined: ITypeDef = { name: 'Undefined', val: undefined, pred: isUndefined };\r\nexport const tyNumber: ITypeDef = { name: 'Number', val: 0, pred: isNumber };\r\nexport const tyString: ITypeDef = { name: 'String', val: '', pred: isString };\r\nexport const tyDate: ITypeDef = { name: 'Object', val: function() { return Date.now(); }, pred: isDate };\r\nexport const tySymbol: ITypeDef = { name: 'Symbol', val: null, pred: isSymbol };\r\nexport const tyObject: ITypeDef = { name: 'Object', val: function() { return {}; }, pred: isObject };\r\nexport const tyArray: ITypeDef = { name: 'Array', val: function() { return []; }, pred: isArray };\r\nexport const tyFunction: ITypeDef = { name: 'Function', val: function() { }, pred: isFunction };\r\n\r\n/**\r\n *  Predefined types and their properties.\r\n */\r\nconst preDefinedTypes: { [key: string]: ITypeDef } = {\r\n    tyBool: tyBool,\r\n    tyNull: tyNull,\r\n    tyUndefined: tyUndefined,\r\n    tyNumber: tyNumber,\r\n    tyString: tyString,\r\n    tyDate: tyDate,\r\n    tySymbol: tySymbol,\r\n    tyObject: tyObject,\r\n    tyArray: tyArray,\r\n    tyFunction: tyFunction\r\n};\r\n/**\r\n * Returns the default value for a given type.\r\n */\r\nexport function defaultValue(ty: ITypeDef): any {\r\n    let val = ty.val;\r\n    if (ty !== tyFunction && typeof val === 'function') {\r\n        val = val();\r\n    }\r\n    return val;\r\n}\r\n\r\n/**\r\n * Type checks if a given value is type of the given ty\r\n */\r\nexport function ok(value: any, ty: ITypeDef): boolean {\r\n    return ty.pred(value);\r\n}\r\n\r\n/**\r\n * Returns the type for the given value.\r\n */\r\nexport function getType(value: any): ITypeDef {\r\n    for (let prop in preDefinedTypes) {\r\n        if (ok(value, preDefinedTypes[prop])) {\r\n            return preDefinedTypes[prop];\r\n        }\r\n    }\r\n    return null;\r\n}\r\n\r\nexport function assert(value: any, ty: ITypeDef): void {\r\n    if (ok(value, ty)) {\r\n        return;\r\n    }\r\n    throw new Error('type check error: exptected type is ' +\r\n        ty + ' but given type is ' + typeof value);\r\n}\r\n","/**\n * @fileOverview\n * Provides utilities for computing hash values\n */\n\nimport * as typeChecker from '../typing/type-checker';\n\n/**\n * Computes the hash code for a given value.\n * This method takes into account the type of the given\n * value when generating its hash code.\n */\nexport function hashCode(value: any): number {\n    let hash = 0;\n    if (typeChecker.ok(value, typeChecker.tyBool)) {\n        value = value ? 1 : 0;\n    } else if (typeChecker.ok(value, typeChecker.tyNumber)) {\n        if (value === 0) {\n            return 0;\n        }\n    }\n\n    if (!value) {\n        return 0;\n    }\n\n    value = value.toString();\n    if (value.length === 0) {\n        return hash;\n    }\n    /*jslint plusplus: true */\n    for (let i = 0, len = value.length; i < len; i++) {\n        const chr = value.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0; // Convert to 32bit integer\n    }\n    return hash;\n}\n\n/**\n * Computes the hash code for a member of an object.\n */\nfunction hashPrimitiveMember(name: string, value: any, configuration: { [key: string]: number }) {\n    const code = hashCode(value);\n    if (configuration) {\n        const bits = configuration[name];\n        if (bits) {\n            return code << configuration[name];\n        }\n    }\n    return code;\n}\n\n/**\n * Computes the hash code for a member of an object, based on\n * the given member member, the value to be hashed, and the configuration\n * about how each member contributes to the enire hash code of the\n * object.\n */\nexport function hashMember(name: string, value: any, configuration: { [key: string]: number }) {\n    if (typeChecker.ok(value, typeChecker.tyArray)) {\n        let code = 0;\n        /*jslint plusplus: true */\n        for (let i = 0; i < value.length; i++) {\n            code = code + hashPrimitiveMember(name, value[i], configuration);\n        }\n        return code;\n    }\n    return hashPrimitiveMember(name, value, configuration);\n}\n","import moment from 'moment';\n\n/**\n * Converts the given date and time into a UTC time. \n * If the given time zone is null or undefined, this \n * method will not use the local time zone.\n * @param dateInLocal Date in local time\n * @param timeInLocal Time in local time\n * @param timezone Optional time zone\n */\nexport function convertToUtc(dateInLocal: Date, timeInLocal: Date, timezone?: number) {\n    // Construct a new time \n    const workTime = new Date(dateInLocal.getFullYear(),\n        dateInLocal.getMonth(),\n        dateInLocal.getDate(),\n        timeInLocal.getHours(),\n        timeInLocal.getMinutes());\n    const timeWrapper = moment(workTime);\n    // The above time should be interpreted in the given timezone\n    if (timezone) {\n        // Utc time\n        timeWrapper.subtract(timezone, 'hours');\n    }\n\n    // Convert to UTC time\n    let timeInUtc = new Date(Date.UTC(timeWrapper.year(),\n        timeWrapper.month(),\n        timeWrapper.date(),\n        timeWrapper.hour(),\n        timeWrapper.minute(),\n        timeWrapper.second()));\n\n    return timeInUtc;\n}\n\n/**\n Get the timezone offset between the local time and UTC.\n */\nexport function getTimezoneOffset() {\n    const d = new Date();\n    const n = d.getTimezoneOffset();\n    return - Math.floor(n / 60);\n}\n\n/**\n * A set of commonly used interval.\n */\nexport enum IntervalEnum {\n    Day = 10,\n    Week = 50,\n    Month = 100,\n    Year = 500,\n    Custom = 1000\n}\n\n/**\n * Returns the UTC time this moment.\n * This method uses the current time zone.\n */\nexport function getUtcNow(): Date {\n    const now = new Date();\n    const offset = getTimezoneOffset();\n    return convertToUtc(now, now, offset);\n}\n\nexport function hasDST(date = new Date()) {\n    const january = new Date(date.getFullYear(), 0, 1).getTimezoneOffset();\n    const july = new Date(date.getFullYear(), 6, 1).getTimezoneOffset();\n    return Math.max(january, july) !== date.getTimezoneOffset();\n}\n\n/**\n * Converts a local time to Utc string.\n * @param date\n */\nexport function convertToUtcString(date: Date) {\n    return date.toISOString();\n}\n\nexport enum MonthEnum {\n    January = 1,\n    February,\n    March,\n    April,\n    May,\n    June,\n    July,\n    August,\n    September,\n    October,\n    November,\n    December\n}\n\nexport function getMonthsOfYear() {\n    const ret = [];\n    for (var enumMember in MonthEnum) {\n        var isValueProperty = parseInt(enumMember, 10) >= 0\n        if (isValueProperty) {\n            ret.push({\n                value: enumMember,\n                text: 'polpCronJob.' + MonthEnum[enumMember]\n            });\n        }\n    }\n    return ret;\n}\n\n\nexport enum DayOfWeekEnum {\n    Sunday = 0,\n    Monday,\n    Tuesday,\n    Wednesday,\n    Thursday,\n    Friday,\n    Saturday\n}\n\n\nexport function getDaysOfWeek() {\n    const ret = [];\n    for (var enumMember in DayOfWeekEnum) {\n        var isValueProperty = parseInt(enumMember, 10) >= 0\n        if (isValueProperty) {\n            ret.push({\n                value: enumMember,\n                text: 'polpCronJob.' + DayOfWeekEnum[enumMember]\n            });\n        }\n    }\n    return ret;\n}\n\nexport function getDaysOfMonth() {\n    const ret = [];\n    for (let i = 1; i < 32; i++) {\n        ret.push({\n            value: i,\n            text: i.toString()\n        });\n    }\n    return ret;\n}\n","import * as typeChecker from './type-checker';\r\n\r\nexport function safeParseString(value: any): string {\r\n    if (!value) {\r\n        return '';\r\n    }\r\n\r\n    return value.toString();\r\n}\r\n\r\n/**\r\n * Parses a given value into an integer.\r\n */\r\nexport function safeParseInt(value: any): number {\r\n    if (!value) {\r\n        return 0;\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyString)) {\r\n        return parseInt(value, 10);\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyNumber)) {\r\n        return value;\r\n    }\r\n    return 0;\r\n}\r\n\r\n/**\r\n * Parses a given value into a float number.\r\n */\r\nexport function safeParseFloat(value: any): number {\r\n    if (!value) {\r\n        return 0.00;\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyString)) {\r\n        return parseFloat(value);\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyNumber)) {\r\n        return value;\r\n    }\r\n    return 0.00;\r\n}\r\n\r\n/**\r\n * Parses a given value into a bool value.\r\n */\r\nexport function safeParseBool(value: any): boolean {\r\n    if (!value) {\r\n        return false;\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyBool)) {\r\n        return value;\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyString)) {\r\n        return value.toLowerCase() === 'true';\r\n    }\r\n    if (typeChecker.ok(value, typeChecker.tyNumber)) {\r\n        return value > 0;\r\n    }\r\n    return false;\r\n}\r\n\r\n/**\r\n * Returns if a given value can be safely converted into the given type.\r\n */\r\nexport function convertible(value: any, ty: typeChecker.ITypeDef): boolean {\r\n    if (typeChecker.ok(value, ty)) {\r\n        return true;\r\n    }\r\n\r\n    if (typeChecker.isNull(value) || typeChecker.isUndefined(value)) {\r\n        return false;\r\n    }\r\n\r\n    if (ty === typeChecker.tyNumber && isNaN(value)) {\r\n        return false;\r\n    }\r\n\r\n    // TODO: refine\r\n    return true;\r\n}\r\n\r\n/**\r\n * Safely converts the given value into a value of the given type.\r\n */\r\nexport function convert(value: any, ty: typeChecker.ITypeDef): any {\r\n    if (ty === typeChecker.tyNumber) {\r\n        return safeParseFloat(value);\r\n    }\r\n    if (ty === typeChecker.tyBool) {\r\n        return safeParseBool(value);\r\n    }\r\n    if (ty === typeChecker.tyString) {\r\n        return value.toString();\r\n    }\r\n\r\n    throw new Error('Cannot convert the given value to the given type');\r\n}\r\n","// \n// Author:: Tom Tang <principleware@gmail.com>\n// Copyright:: Copyright (c) 2017, Tom Tang\n// \n// Permission is hereby granted, free of charge, to any person obtaining\n// a copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to\n// permit persons to whom the Software is furnished to do so, subject to\n// the following conditions:\n// \n// The above copyright notice and this permission notice shall be\n// included in all copies or substantial portions of the Software.\n// \n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n// \n// Except as contained in this notice, the name(s) of the above copyright\n// holders shall not be used in advertising or otherwise to promote the\n// sale, use or other dealings in this Software without prior written\n// authorization.\n\nfunction asap(fn) {\n    setTimeout(fn, 1);\n}\n\nfunction bind(fn, thisArg) {\n    return function() {\n        fn.apply(thisArg, arguments);\n    };\n}\n\nvar isArray = Array.isArray || function(value) { return Object.prototype.toString.call(value) === \"[object Array]\"; };\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, onFulfilled, onRejected) {\n    var done = false;\n    try {\n        fn(function(value) {\n            if (done) {\n                return;\n            }\n            done = true;\n            onFulfilled(value);\n        }, function(reason) {\n            if (done) {\n                return;\n            }\n            done = true;\n            onRejected(reason);\n        });\n    } catch (ex) {\n        if (done) {\n            return;\n        }\n        done = true;\n        onRejected(ex);\n    }\n}\n\nfunction handle(deferred) {\n    var me = this;\n    if (this._state === null) {\n        this._deferreds.push(deferred);\n        return;\n    }\n    asap(function() {\n        var cb, ret;\n        cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n        if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n        }\n        try {\n            ret = cb(me._value);\n        }\n        catch (e) {\n            deferred.reject(e);\n            return;\n        }\n        deferred.resolve(ret);\n    });\n}\n\n\nfunction finale() {\n    var i, len;\n    /*jslint plusplus:true */\n    for (i = 0, len = this._deferreds.length; i < len; i++) {\n        handle.call(this, this._deferreds[i]);\n    }\n    this._deferreds = null;\n}\n\nfunction reject(newValue) {\n    this._state = false;\n    this._value = newValue;\n    finale.call(this);\n}\n\nfunction resolve(newValue) {\n    try { //Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n        if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n        }\n        if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n                doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n                return;\n            }\n        }\n        this._state = true;\n        this._value = newValue;\n        finale.call(this);\n    } catch (e) { reject.call(this, e); }\n}\n\n/**\n * Defines a dummy promise, which simulates the behavior of a normal Promise\n * but is suitable used in synchronous call.\n * This resulted object is also a jQuery deferred object, therefore,\n * it will be resolved by the jQuery deferred object if it is a resolved value in\n * the jQuery deferred object.\n */\nexport function DummyPromise<T>(fn: (resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?) => void) => void) {\n    if (typeof this !== 'object') {\n        throw new TypeError('Promises must be constructed via new');\n    }\n    if (typeof fn !== 'function') {\n        throw new TypeError('not a function');\n    }\n    this._state = null;\n    this._value = null;\n    this._deferreds = [];\n\n    doResolve(fn, bind(resolve, this), bind(reject, this));\n}\n\n\nfunction Handler(onFulfilled, onRejected, resolve, reject) {\n    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n    this.resolve = resolve;\n    this.reject = reject;\n}\n\n\nDummyPromise.prototype['catch'] = function(onRejected) {\n    return this.then(null, onRejected);\n};\n\nDummyPromise.prototype.then = function(onFulfilled, onRejected) {\n    const me = this;\n    return new DummyPromise(function(resolve, reject) {\n        handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n    });\n};\n\nDummyPromise.prototype.all = function(arrayArg) {\n    var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arrayArg) ? arrayArg : arguments);\n\n    return new DummyPromise(function(resolve, reject) {\n        if (args.length === 0) {\n            return resolve([]);\n        }\n        var remaining = args.length, i;\n        function res(i, val) {\n            try {\n                if (val && (typeof val === 'object' || typeof val === 'function')) {\n                    var then = val.then;\n                    if (typeof then === 'function') {\n                        then.call(val, function(val) { res(i, val); }, reject);\n                        return;\n                    }\n                }\n                args[i] = val;\n\n                /*jslint plusplus: true */\n                if (--remaining === 0) {\n                    resolve(args);\n                }\n            } catch (ex) {\n                reject(ex);\n            }\n        }\n        /*jslint plusplus: true */         for (i = 0; i < args.length; i++) {\n            res(i, args[i]);\n        }\n    });\n};\n\nDummyPromise.prototype.resolve = function(value) {\n    if (value && typeof value === 'object' && value.constructor === DummyPromise) {\n        return value;\n    }\n\n    return new DummyPromise(function(resolve) {\n        resolve(value);\n    });\n};\n\nDummyPromise.prototype.reject = function(value) {\n    /*jslint unparam: true */\n    return new DummyPromise(function(resolve, reject) {\n        reject(value);\n    });\n};\n\nDummyPromise.prototype.race = function(values) {\n    return new DummyPromise(function(resolve, reject) {\n        var i, len;\n        /*jslint plusplus: true */\n        for (i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n        }\n    });\n};\n\nDummyPromise.prototype.always = function(onFulfilled) {\n    return this.then(onFulfilled, onFulfilled);\n};\n\nDummyPromise.prototype.done = function(onFulfilled) {\n    return this.then(onFulfilled);\n};\n\nDummyPromise.prototype.fail = function(onRejected) {\n    return this.then(null, onRejected);\n};\n\nDummyPromise.prototype.promise = function() {\n    return this;\n};\n\nDummyPromise.prototype.progress = function() {\n    return this;\n};\n","// \r\n// Author:: Tom Tang <principleware@gmail.com>\r\n// Copyright:: Copyright (c) 2017, Tom Tang\r\n// \r\n// Permission is hereby granted, free of charge, to any person obtaining\r\n// a copy of this software and associated documentation files (the\r\n// \"Software\"), to deal in the Software without restriction, including\r\n// without limitation the rights to use, copy, modify, merge, publish,\r\n// distribute, sublicense, and/or sell copies of the Software, and to\r\n// permit persons to whom the Software is furnished to do so, subject to\r\n// the following conditions:\r\n// \r\n// The above copyright notice and this permission notice shall be\r\n// included in all copies or substantial portions of the Software.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n// EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\r\n// NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\r\n// LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\r\n// OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\r\n// WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n// \r\n// Except as contained in this notice, the name(s) of the above copyright\r\n// holders shall not be used in advertising or otherwise to promote the\r\n// sale, use or other dealings in this Software without prior written\r\n// authorization.\r\n\r\n\r\nimport { DummyPromise } from './promise-like';\r\nimport * as typeChecker from '../typing/type-checker';\r\n\r\n/**\r\n * Lifts a single value or a function into a Promise-like object.\r\n * Provides a method of wrapping a single value or a function  into a Promise,\r\n * in order that the following operation \r\n * may conform to the standard Promise operation.\r\n * In some scenario, we may first attempt to get a value from cache.\r\n * Motivation.\r\n * In this case, we need to return a value. However, if the value is\r\n * not available in the cache, we may have to go ahead to load it\r\n * asynchronously. Loading a value asynchronously usually returns\r\n * a Promise. To untify the return from two cases, we\r\n * escalate a single value into a Promise.\r\n */\r\nexport function lift<T>(value: T, thisArg: Object): PromiseLike<T> {\r\n    /*jslint unparam: true */\r\n    return new DummyPromise(function(resolve, reject) {\r\n        if (typeChecker.isFunction(value)) {\r\n            const restArgs = [];\r\n            /*jslint plusplus: true */\r\n            for (let i = 2; i < arguments.length; i++) {\r\n                restArgs.push(arguments[i]);\r\n            }\r\n            const ret = value.apply(thisArg || null, restArgs);\r\n            resolve(ret);\r\n        } else {\r\n            resolve(value);\r\n        }\r\n    });\r\n}\r\n\r\n/**\r\n * Lifts a value into an rejected state.\r\n */\r\nexport function liftIntoReject<T>(value: T): PromiseLike<T> {\r\n    return new DummyPromise(function(resolve, reject) {\r\n        /*jslint unparam: true */\r\n        reject(value);\r\n    });\r\n}\r\n\r\n/**\r\n * Converts a given promise into another promise which ensures that\r\n * the given guard evalutes to be true from the state of the given promise.\r\n */\r\nexport function liftWithGuard<T>(promise: PromiseLike<T>, guard: (x: T) => boolean): PromiseLike<T> {\r\n    return promise.then(function(data) {\r\n        return new DummyPromise(function(resolve, reject) {\r\n            if (guard(data)) {\r\n                resolve(data);\r\n            } else {\r\n                reject(data);\r\n            }\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Settles a promise.\r\n */\r\nexport function settle<T>(promise: PromiseLike<T>): PromiseLike<T> {\r\n    return new DummyPromise(function(resolve) {\r\n        promise.then(function(value) {\r\n            resolve({\r\n                state: 'fulfilled',\r\n                data: value\r\n            });\r\n        }, function() {\r\n            resolve({\r\n                state: 'rejected'\r\n            });\r\n        });\r\n    });\r\n}\r\n\r\n/**\r\n * Converts the given promise into a promise which does not reject anything.\r\n */\r\nexport function liftToPredicate<T>(promise: PromiseLike<T>, guard: (x: T) => boolean): PromiseLike<boolean> {\r\n    return new DummyPromise(function(resolve, reject) {\r\n        /*jslint unparam: true */\r\n        promise.then(function(data) {\r\n            resolve(guard(data));\r\n        }, function() {\r\n            resolve(false);\r\n        });\r\n    });\r\n}\r\n\r\n\r\nexport interface IPipelineSettings<U> {\r\n    validator?: (x) => boolean,\r\n    adaptor: (x) => U\r\n}\r\n\r\n/**\r\n * Transforms a given promise with additonal pipeline processing.\r\n * Specifically, in this method, compared to the given promise, the return\r\n * promise contains validating and adpating stages.\r\n */\r\nexport function readerPipeline<T, U>(readerPromise: PromiseLike<T>, settings: IPipelineSettings<U>) {\r\n    return readerPromise\r\n        .then(function(data) {\r\n            if (settings.validator) {\r\n                if (!settings.validator(data)) {\r\n                    throw new Error('Data is not valid: ' + data);\r\n                }\r\n            }\r\n            return data;\r\n        })\r\n        .then(function(data) {\r\n            return settings.adaptor(data);\r\n        });\r\n}\r\n\r\n/**\r\n * Transforms a given promise into one promise with our own implementation.\r\n */\r\nexport function transform<T>(promise: PromiseLike<T>): PromiseLike<T> {\r\n    return new DummyPromise(function(resolve, reject) {\r\n        promise.then(resolve, reject);\r\n    });\r\n}\r\n","/**\n * @fileOverview\n * Provides utilities for making interoperable the promise-like objects\n * from different modules.\n */\n/**\n * Extends a given promise into a deferred object of jQuery.\n * With this extension, we are able to chain together jQuery deferred\n * objects (which are also promise objects.)\n */\nexport function tojQueryDeferred(promise) {\n    if (!promise.always) {\n        promise.always = function(onFulfilled) {\n            return this.then(onFulfilled, onFulfilled);\n        };\n    }\n    if (!promise.done) {\n        promise.done = function(onFulfilled) {\n            return this.then(onFulfilled);\n        };\n    }\n    if (!promise.fail) {\n        promise.fail = function(onRejected) {\n            return this.then(null, onRejected);\n        };\n    }\n    if (!promise.progress) {\n        promise.progress = function() {\n            return this;\n        };\n    }\n    if (!promise.promise) {\n        promise.promise = function() {\n            return this;\n        };\n    }\n    return promise;\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["isArray","typeChecker.ok","typeChecker.tyBool","typeChecker.tyNumber","typeChecker.tyArray","typeChecker.tyString","typeChecker.isNull","typeChecker.isUndefined","typeChecker.isFunction"],"mappings":";;AAAA;;AAEG;SACa,IAAI,GAAA;IAChB,IAAI,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE,CAAC;IAC7B,MAAM,IAAI,GAAG,sCAAsC,CAAC,OAAO,CAAC,OAAO,EAAE,UAAS,CAAC,EAAA;AAC3E,QAAA,MAAM,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;QAC5C,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;QACvB,OAAO,CAAC,CAAC,KAAK,GAAG,GAAG,CAAC,IAAI,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;AAC1D,KAAC,CAAC,CAAC;AACH,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;AAEG;AACa,SAAA,YAAY,CAAC,GAAG,EAAE,GAAG,EAAA;AACjC,IAAA,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;AAC7D;;AClBA;;AAEG;SACa,aAAa,CAAC,GAAW,EAAE,KAAU,EAAE,GAAkB,EAAA;IACrE,IAAI,KAAK,YAAY,KAAK,EAAE;AACxB,QAAA,KAAK,CAAC,OAAO,CAAC,CAAC,IAAI,KAAI;AACnB,YAAA,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,KAAK,GAAG,kBAAkB,CAAC,IAAI,CAAC,CAAC,CAAC;AACzE,SAAC,CAAC,CAAC;AACN,KAAA;AAAM,SAAA;AACH,QAAA,GAAG,CAAC,IAAI,CAAC,kBAAkB,CAAC,GAAG,CAAC,GAAG,GAAG,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC,CAAC;AACvE,KAAA;AACL,CAAC;AAED;;AAEG;AACG,SAAU,SAAS,CAAC,IAAY,EAAA;IAClC,MAAM,GAAG,GAAkB,EAAE,CAAC;AAC9B,IAAA,KAAK,IAAI,CAAC,IAAI,IAAI,EAAE;AAChB,QAAA,IAAI,IAAI,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;YACxB,aAAa,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;AAClC,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,GAAG,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC;AAC9C,CAAC;AAEe,SAAA,cAAc,CAAC,IAAY,EAAE,GAAW,EAAA;IACpD,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;IACvC,MAAM,KAAK,GAAG,IAAI,MAAM,CAAC,OAAO,GAAG,IAAI,GAAG,mBAAmB,CAAC,CAAC;IAC/D,MAAM,OAAO,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;IAChC,IAAI,CAAC,OAAO,EAAE;AACV,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;AACD,IAAA,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE;AACb,QAAA,OAAO,EAAE,CAAC;AACb,KAAA;AACD,IAAA,OAAO,kBAAkB,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;AAC9D,CAAC;AAEe,SAAA,mBAAmB,CAAC,IAAY,EAAE,GAAY,EAAA;IAC1D,IAAI,CAAC,GAAG,EAAE;AACN,QAAA,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC9B,KAAA;AACD,IAAA,OAAO,cAAc,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrC,CAAC;AAEe,SAAA,kBAAkB,CAAC,IAAY,EAAE,GAAY,EAAA;IACzD,IAAI,CAAC,GAAG,EAAE;AACN,QAAA,GAAG,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,CAAC;AAC9B,KAAA;AACD,IAAA,OAAO,cAAc,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;AACrC;;ACnDA;;AAEG;AACa,SAAA,SAAS,CAAI,OAAiB,EAAE,GAAiB,EAAA;AAC7D,IAAA,IAAI,EAAE,GAAG,YAAY,KAAK,CAAC,EAAE;AACzB,QAAA,OAAO,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;QAClB,OAAO;AACV,KAAA;AAED,IAAA,GAAG,CAAC,OAAO,CAAC,UAAS,IAAI,EAAA;AACrB,QAAA,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvB,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;AAEG;AACG,SAAU,SAAS,CAAC,CAAS,EAAA;IAC/B,MAAM,GAAG,GAAG,EAAE,CAAC;AACf,IAAA,KAAK,IAAI,CAAC,IAAI,CAAC,EAAE;AACb,QAAA,IAAI,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,EAAE;YACrB,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAClB,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,GAAG,CAAC;AACf;;ACzBA;;AAEG;AACa,SAAA,OAAO,CAAC,MAAc,EAAE,MAA8B,EAAA;;IAElE,OAAO,MAAM,CAAC,OAAO,CAAC,kBAAkB,EAAE,UAAS,CAAC,EAAE,GAAG,EAAA;QACrD,OAAO,CAAC,OAAO,MAAM,CAAC,GAAG,CAAC,KAAK,WAAW,IAAI,EAAE,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC;AACnE,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;;;AAIG;AACG,SAAU,WAAW,CAAC,IAAY,EAAA;AACpC,IAAA,IAAI,GAAG,IAAI;AACN,SAAA,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC;AACxB,SAAA,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC;AACxB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC;AACvB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC;AACvB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC;AACvB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC;AACvB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC;AACvB,SAAA,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;AAC7B,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;;AAGG;AACG,SAAU,aAAa,CAAC,IAAY,EAAA;AACtC,IAAA,IAAI,GAAG,IAAI;AACN,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC;AACtB,SAAA,OAAO,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;AAC5B,IAAA,OAAO,IAAI,CAAC;AAChB;;AC3CA;SACgB,IAAI,CAAO,QAAkB,EACzC,SAAmB,EACnB,SAAmD,EAAA;AACnD,IAAA,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAI,KAAI;QAC5B,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAI,KAAI;AAC5B,YAAA,OAAO,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;AACP,KAAC,CAAC,CAAC;AACP,CAAC;AAED;SACgB,YAAY,CAAO,QAAkB,EACjD,SAAmB,EACnB,SAAmD,EAAA;AACnD,IAAA,OAAO,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAI,KAAI;AAC5B,QAAA,OAAO,SAAS,CAAC,IAAI,CAAC,CAAC,CAAI,KAAI;AAC3B,YAAA,OAAO,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AAC3B,SAAC,CAAC,CAAC;AACP,KAAC,CAAC,CAAC;AACP;;ACpBA;;;;;;;;;;;;AAYE;AAGI,SAAU,SAAS,CAAC,CAAM,EAAA;AAC5B,IAAA,OAAO,OAAO,CAAC,KAAK,SAAS,CAAC;AAClC,CAAC;AAEK,SAAU,QAAQ,CAAC,CAAM,EAAA;AAC3B,IAAA,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC;AACjC,CAAC;AAEK,SAAU,QAAQ,CAAC,CAAM,EAAA;AAC3B,IAAA,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC;AACjC,CAAC;AAEK,SAAU,MAAM,CAAC,CAAM,EAAA;AACzB,IAAA,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,CAAC,KAAK,eAAe,CAAC;AACjE,CAAC;AAEK,SAAU,QAAQ,CAAC,CAAM,EAAA;AAC3B,IAAA,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC;AACjC,CAAC;AAEK,SAAU,MAAM,CAAC,CAAM,EAAA;IACzB,OAAO,CAAC,KAAK,IAAI,CAAC;AACtB,CAAC;AAEK,SAAU,WAAW,CAAC,CAAM,EAAA;IAC9B,OAAO,CAAC,KAAK,SAAS,CAAC;AAC3B,CAAC;AAEK,SAAUA,SAAO,CAAC,CAAM,EAAA;IAC1B,OAAO,CAAC,YAAY,KAAK,CAAC;AAC9B,CAAC;AAEK,SAAU,QAAQ,CAAC,CAAM,EAAA;AAC3B,IAAA,OAAO,OAAO,CAAC,KAAK,QAAQ,CAAC;AACjC,CAAC;AAEK,SAAU,UAAU,CAAC,CAAM,EAAA;AAC7B,IAAA,OAAO,OAAO,CAAC,KAAK,UAAU,CAAC;AACnC,CAAC;AAMA,CAAC;AAEW,MAAA,MAAM,GAAa,EAAE,IAAI,EAAE,SAAS,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,EAAE,SAAS,GAAG;AACpE,MAAA,MAAM,GAAa,EAAE,IAAI,EAAE,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,GAAG;AAC7D,MAAA,WAAW,GAAa,EAAE,IAAI,EAAE,WAAW,EAAE,GAAG,EAAE,SAAS,EAAE,IAAI,EAAE,WAAW,GAAG;AACjF,MAAA,QAAQ,GAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,EAAE,IAAI,EAAE,QAAQ,GAAG;AAChE,MAAA,QAAQ,GAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,EAAE,EAAE,IAAI,EAAE,QAAQ,GAAG;AACjE,MAAA,MAAM,GAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,YAAA,EAAa,OAAO,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,MAAM,GAAG;AAC5F,MAAA,QAAQ,GAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,GAAG;MACnE,QAAQ,GAAa,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,EAAE,cAAa,OAAO,EAAE,CAAC,EAAE,EAAE,IAAI,EAAE,QAAQ,GAAG;MACxF,OAAO,GAAa,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,EAAE,cAAa,OAAO,EAAE,CAAC,EAAE,EAAE,IAAI,EAAEA,SAAO,GAAG;AACrF,MAAA,UAAU,GAAa,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,EAAE,eAAc,EAAE,IAAI,EAAE,UAAU,GAAG;AAEhG;;AAEG;AACH,MAAM,eAAe,GAAgC;AACjD,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,WAAW,EAAE,WAAW;AACxB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,MAAM,EAAE,MAAM;AACd,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,QAAQ,EAAE,QAAQ;AAClB,IAAA,OAAO,EAAE,OAAO;AAChB,IAAA,UAAU,EAAE,UAAU;CACzB,CAAC;AACF;;AAEG;AACG,SAAU,YAAY,CAAC,EAAY,EAAA;AACrC,IAAA,IAAI,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;IACjB,IAAI,EAAE,KAAK,UAAU,IAAI,OAAO,GAAG,KAAK,UAAU,EAAE;QAChD,GAAG,GAAG,GAAG,EAAE,CAAC;AACf,KAAA;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAED;;AAEG;AACa,SAAA,EAAE,CAAC,KAAU,EAAE,EAAY,EAAA;AACvC,IAAA,OAAO,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;AAC1B,CAAC;AAED;;AAEG;AACG,SAAU,OAAO,CAAC,KAAU,EAAA;AAC9B,IAAA,KAAK,IAAI,IAAI,IAAI,eAAe,EAAE;QAC9B,IAAI,EAAE,CAAC,KAAK,EAAE,eAAe,CAAC,IAAI,CAAC,CAAC,EAAE;AAClC,YAAA,OAAO,eAAe,CAAC,IAAI,CAAC,CAAC;AAChC,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAEe,SAAA,MAAM,CAAC,KAAU,EAAE,EAAY,EAAA;AAC3C,IAAA,IAAI,EAAE,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE;QACf,OAAO;AACV,KAAA;IACD,MAAM,IAAI,KAAK,CAAC,sCAAsC;AAClD,QAAA,EAAE,GAAG,qBAAqB,GAAG,OAAO,KAAK,CAAC,CAAC;AACnD;;AC3HA;;;AAGG;AAIH;;;;AAIG;AACG,SAAU,QAAQ,CAAC,KAAU,EAAA;IAC/B,IAAI,IAAI,GAAG,CAAC,CAAC;IACb,IAAIC,EAAc,CAAC,KAAK,EAAEC,MAAkB,CAAC,EAAE;QAC3C,KAAK,GAAG,KAAK,GAAG,CAAC,GAAG,CAAC,CAAC;AACzB,KAAA;SAAM,IAAID,EAAc,CAAC,KAAK,EAAEE,QAAoB,CAAC,EAAE;QACpD,IAAI,KAAK,KAAK,CAAC,EAAE;AACb,YAAA,OAAO,CAAC,CAAC;AACZ,SAAA;AACJ,KAAA;IAED,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,CAAC,CAAC;AACZ,KAAA;AAED,IAAA,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;AACzB,IAAA,IAAI,KAAK,CAAC,MAAM,KAAK,CAAC,EAAE;AACpB,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;;AAED,IAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;QAC9C,MAAM,GAAG,GAAG,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;AAChC,QAAA,IAAI,GAAG,CAAC,CAAC,IAAI,IAAI,CAAC,IAAI,IAAI,IAAI,GAAG,CAAC;AAClC,QAAA,IAAI,IAAI,CAAC,CAAC;AACb,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;AAEG;AACH,SAAS,mBAAmB,CAAC,IAAY,EAAE,KAAU,EAAE,aAAwC,EAAA;AAC3F,IAAA,MAAM,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;AAC7B,IAAA,IAAI,aAAa,EAAE;AACf,QAAA,MAAM,IAAI,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;AACjC,QAAA,IAAI,IAAI,EAAE;AACN,YAAA,OAAO,IAAI,IAAI,aAAa,CAAC,IAAI,CAAC,CAAC;AACtC,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;;;;AAKG;SACa,UAAU,CAAC,IAAY,EAAE,KAAU,EAAE,aAAwC,EAAA;IACzF,IAAIF,EAAc,CAAC,KAAK,EAAEG,OAAmB,CAAC,EAAE;QAC5C,IAAI,IAAI,GAAG,CAAC,CAAC;;AAEb,QAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACnC,YAAA,IAAI,GAAG,IAAI,GAAG,mBAAmB,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,aAAa,CAAC,CAAC;AACpE,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;IACD,OAAO,mBAAmB,CAAC,IAAI,EAAE,KAAK,EAAE,aAAa,CAAC,CAAC;AAC3D;;ACnEA;;;;;;;AAOG;SACa,YAAY,CAAC,WAAiB,EAAE,WAAiB,EAAE,QAAiB,EAAA;;AAEhF,IAAA,MAAM,QAAQ,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,WAAW,EAAE,EAC/C,WAAW,CAAC,QAAQ,EAAE,EACtB,WAAW,CAAC,OAAO,EAAE,EACrB,WAAW,CAAC,QAAQ,EAAE,EACtB,WAAW,CAAC,UAAU,EAAE,CAAC,CAAC;AAC9B,IAAA,MAAM,WAAW,GAAG,MAAM,CAAC,QAAQ,CAAC,CAAC;;AAErC,IAAA,IAAI,QAAQ,EAAE;;AAEV,QAAA,WAAW,CAAC,QAAQ,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;AAC3C,KAAA;;AAGD,IAAA,IAAI,SAAS,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,IAAI,EAAE,EAChD,WAAW,CAAC,KAAK,EAAE,EACnB,WAAW,CAAC,IAAI,EAAE,EAClB,WAAW,CAAC,IAAI,EAAE,EAClB,WAAW,CAAC,MAAM,EAAE,EACpB,WAAW,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC;AAE3B,IAAA,OAAO,SAAS,CAAC;AACrB,CAAC;AAED;;AAEG;SACa,iBAAiB,GAAA;AAC7B,IAAA,MAAM,CAAC,GAAG,IAAI,IAAI,EAAE,CAAC;AACrB,IAAA,MAAM,CAAC,GAAG,CAAC,CAAC,iBAAiB,EAAE,CAAC;IAChC,OAAO,CAAE,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,EAAE,CAAC,CAAC;AAChC,CAAC;AAED;;AAEG;AACS,IAAA,aAMX;AAND,CAAA,UAAY,YAAY,EAAA;IACpB,YAAA,CAAA,YAAA,CAAA,KAAA,CAAA,GAAA,EAAA,CAAA,GAAA,KAAQ,CAAA;IACR,YAAA,CAAA,YAAA,CAAA,MAAA,CAAA,GAAA,EAAA,CAAA,GAAA,MAAS,CAAA;IACT,YAAA,CAAA,YAAA,CAAA,OAAA,CAAA,GAAA,GAAA,CAAA,GAAA,OAAW,CAAA;IACX,YAAA,CAAA,YAAA,CAAA,MAAA,CAAA,GAAA,GAAA,CAAA,GAAA,MAAU,CAAA;IACV,YAAA,CAAA,YAAA,CAAA,QAAA,CAAA,GAAA,IAAA,CAAA,GAAA,QAAa,CAAA;AACjB,CAAC,EANW,YAAY,KAAZ,YAAY,GAMvB,EAAA,CAAA,CAAA,CAAA;AAED;;;AAGG;SACa,SAAS,GAAA;AACrB,IAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;AACvB,IAAA,MAAM,MAAM,GAAG,iBAAiB,EAAE,CAAC;IACnC,OAAO,YAAY,CAAC,GAAG,EAAE,GAAG,EAAE,MAAM,CAAC,CAAC;AAC1C,CAAC;SAEe,MAAM,CAAC,IAAI,GAAG,IAAI,IAAI,EAAE,EAAA;AACpC,IAAA,MAAM,OAAO,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC;AACvE,IAAA,MAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,iBAAiB,EAAE,CAAC;AACpE,IAAA,OAAO,IAAI,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,iBAAiB,EAAE,CAAC;AAChE,CAAC;AAED;;;AAGG;AACG,SAAU,kBAAkB,CAAC,IAAU,EAAA;AACzC,IAAA,OAAO,IAAI,CAAC,WAAW,EAAE,CAAC;AAC9B,CAAC;AAEW,IAAA,UAaX;AAbD,CAAA,UAAY,SAAS,EAAA;IACjB,SAAA,CAAA,SAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAW,CAAA;IACX,SAAA,CAAA,SAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAQ,CAAA;IACR,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAK,CAAA;IACL,SAAA,CAAA,SAAA,CAAA,OAAA,CAAA,GAAA,CAAA,CAAA,GAAA,OAAK,CAAA;IACL,SAAA,CAAA,SAAA,CAAA,KAAA,CAAA,GAAA,CAAA,CAAA,GAAA,KAAG,CAAA;IACH,SAAA,CAAA,SAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,GAAA,MAAI,CAAA;IACJ,SAAA,CAAA,SAAA,CAAA,MAAA,CAAA,GAAA,CAAA,CAAA,GAAA,MAAI,CAAA;IACJ,SAAA,CAAA,SAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAAA,GAAA,QAAM,CAAA;IACN,SAAA,CAAA,SAAA,CAAA,WAAA,CAAA,GAAA,CAAA,CAAA,GAAA,WAAS,CAAA;IACT,SAAA,CAAA,SAAA,CAAA,SAAA,CAAA,GAAA,EAAA,CAAA,GAAA,SAAO,CAAA;IACP,SAAA,CAAA,SAAA,CAAA,UAAA,CAAA,GAAA,EAAA,CAAA,GAAA,UAAQ,CAAA;IACR,SAAA,CAAA,SAAA,CAAA,UAAA,CAAA,GAAA,EAAA,CAAA,GAAA,UAAQ,CAAA;AACZ,CAAC,EAbW,SAAS,KAAT,SAAS,GAapB,EAAA,CAAA,CAAA,CAAA;SAEe,eAAe,GAAA;IAC3B,MAAM,GAAG,GAAG,EAAE,CAAC;AACf,IAAA,KAAK,IAAI,UAAU,IAAI,SAAS,EAAE;QAC9B,IAAI,eAAe,GAAG,QAAQ,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,CAAC,CAAA;AACnD,QAAA,IAAI,eAAe,EAAE;YACjB,GAAG,CAAC,IAAI,CAAC;AACL,gBAAA,KAAK,EAAE,UAAU;AACjB,gBAAA,IAAI,EAAE,cAAc,GAAG,SAAS,CAAC,UAAU,CAAC;AAC/C,aAAA,CAAC,CAAC;AACN,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;AAGW,IAAA,cAQX;AARD,CAAA,UAAY,aAAa,EAAA;IACrB,aAAA,CAAA,aAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAAA,GAAA,QAAU,CAAA;IACV,aAAA,CAAA,aAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAAA,GAAA,QAAM,CAAA;IACN,aAAA,CAAA,aAAA,CAAA,SAAA,CAAA,GAAA,CAAA,CAAA,GAAA,SAAO,CAAA;IACP,aAAA,CAAA,aAAA,CAAA,WAAA,CAAA,GAAA,CAAA,CAAA,GAAA,WAAS,CAAA;IACT,aAAA,CAAA,aAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAQ,CAAA;IACR,aAAA,CAAA,aAAA,CAAA,QAAA,CAAA,GAAA,CAAA,CAAA,GAAA,QAAM,CAAA;IACN,aAAA,CAAA,aAAA,CAAA,UAAA,CAAA,GAAA,CAAA,CAAA,GAAA,UAAQ,CAAA;AACZ,CAAC,EARW,aAAa,KAAb,aAAa,GAQxB,EAAA,CAAA,CAAA,CAAA;SAGe,aAAa,GAAA;IACzB,MAAM,GAAG,GAAG,EAAE,CAAC;AACf,IAAA,KAAK,IAAI,UAAU,IAAI,aAAa,EAAE;QAClC,IAAI,eAAe,GAAG,QAAQ,CAAC,UAAU,EAAE,EAAE,CAAC,IAAI,CAAC,CAAA;AACnD,QAAA,IAAI,eAAe,EAAE;YACjB,GAAG,CAAC,IAAI,CAAC;AACL,gBAAA,KAAK,EAAE,UAAU;AACjB,gBAAA,IAAI,EAAE,cAAc,GAAG,aAAa,CAAC,UAAU,CAAC;AACnD,aAAA,CAAC,CAAC;AACN,SAAA;AACJ,KAAA;AACD,IAAA,OAAO,GAAG,CAAC;AACf,CAAC;SAEe,cAAc,GAAA;IAC1B,MAAM,GAAG,GAAG,EAAE,CAAC;IACf,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,EAAE,EAAE,CAAC,EAAE,EAAE;QACzB,GAAG,CAAC,IAAI,CAAC;AACL,YAAA,KAAK,EAAE,CAAC;AACR,YAAA,IAAI,EAAE,CAAC,CAAC,QAAQ,EAAE;AACrB,SAAA,CAAC,CAAC;AACN,KAAA;AACD,IAAA,OAAO,GAAG,CAAC;AACf;;AC7IM,SAAU,eAAe,CAAC,KAAU,EAAA;IACtC,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,EAAE,CAAC;AACb,KAAA;AAED,IAAA,OAAO,KAAK,CAAC,QAAQ,EAAE,CAAC;AAC5B,CAAC;AAED;;AAEG;AACG,SAAU,YAAY,CAAC,KAAU,EAAA;IACnC,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,CAAC,CAAC;AACZ,KAAA;IACD,IAAIH,EAAc,CAAC,KAAK,EAAEI,QAAoB,CAAC,EAAE;AAC7C,QAAA,OAAO,QAAQ,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;AAC9B,KAAA;IACD,IAAIJ,EAAc,CAAC,KAAK,EAAEE,QAAoB,CAAC,EAAE;AAC7C,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;AACD,IAAA,OAAO,CAAC,CAAC;AACb,CAAC;AAED;;AAEG;AACG,SAAU,cAAc,CAAC,KAAU,EAAA;IACrC,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;IACD,IAAIF,EAAc,CAAC,KAAK,EAAEI,QAAoB,CAAC,EAAE;AAC7C,QAAA,OAAO,UAAU,CAAC,KAAK,CAAC,CAAC;AAC5B,KAAA;IACD,IAAIJ,EAAc,CAAC,KAAK,EAAEE,QAAoB,CAAC,EAAE;AAC7C,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;AACD,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;AAEG;AACG,SAAU,aAAa,CAAC,KAAU,EAAA;IACpC,IAAI,CAAC,KAAK,EAAE;AACR,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;IACD,IAAIF,EAAc,CAAC,KAAK,EAAEC,MAAkB,CAAC,EAAE;AAC3C,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;IACD,IAAID,EAAc,CAAC,KAAK,EAAEI,QAAoB,CAAC,EAAE;AAC7C,QAAA,OAAO,KAAK,CAAC,WAAW,EAAE,KAAK,MAAM,CAAC;AACzC,KAAA;IACD,IAAIJ,EAAc,CAAC,KAAK,EAAEE,QAAoB,CAAC,EAAE;QAC7C,OAAO,KAAK,GAAG,CAAC,CAAC;AACpB,KAAA;AACD,IAAA,OAAO,KAAK,CAAC;AACjB,CAAC;AAED;;AAEG;AACa,SAAA,WAAW,CAAC,KAAU,EAAE,EAAwB,EAAA;IAC5D,IAAIF,EAAc,CAAC,KAAK,EAAE,EAAE,CAAC,EAAE;AAC3B,QAAA,OAAO,IAAI,CAAC;AACf,KAAA;AAED,IAAA,IAAIK,MAAkB,CAAC,KAAK,CAAC,IAAIC,WAAuB,CAAC,KAAK,CAAC,EAAE;AAC7D,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;IAED,IAAI,EAAE,KAAKJ,QAAoB,IAAI,KAAK,CAAC,KAAK,CAAC,EAAE;AAC7C,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;;AAGD,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;AAED;;AAEG;AACa,SAAA,OAAO,CAAC,KAAU,EAAE,EAAwB,EAAA;AACxD,IAAA,IAAI,EAAE,KAAKA,QAAoB,EAAE;AAC7B,QAAA,OAAO,cAAc,CAAC,KAAK,CAAC,CAAC;AAChC,KAAA;AACD,IAAA,IAAI,EAAE,KAAKD,MAAkB,EAAE;AAC3B,QAAA,OAAO,aAAa,CAAC,KAAK,CAAC,CAAC;AAC/B,KAAA;AACD,IAAA,IAAI,EAAE,KAAKG,QAAoB,EAAE;AAC7B,QAAA,OAAO,KAAK,CAAC,QAAQ,EAAE,CAAC;AAC3B,KAAA;AAED,IAAA,MAAM,IAAI,KAAK,CAAC,kDAAkD,CAAC,CAAC;AACxE;;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAS,IAAI,CAAC,EAAE,EAAA;AACZ,IAAA,UAAU,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,IAAI,CAAC,EAAE,EAAE,OAAO,EAAA;IACrB,OAAO,YAAA;AACH,QAAA,EAAE,CAAC,KAAK,CAAC,OAAO,EAAE,SAAS,CAAC,CAAC;AACjC,KAAC,CAAC;AACN,CAAC;AAED,IAAI,OAAO,GAAG,KAAK,CAAC,OAAO,IAAI,UAAS,KAAK,EAAI,EAAA,OAAO,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,gBAAgB,CAAC,EAAE,CAAC;AAEtH;;;;;AAKG;AACH,SAAS,SAAS,CAAC,EAAE,EAAE,WAAW,EAAE,UAAU,EAAA;IAC1C,IAAI,IAAI,GAAG,KAAK,CAAC;IACjB,IAAI;QACA,EAAE,CAAC,UAAS,KAAK,EAAA;AACb,YAAA,IAAI,IAAI,EAAE;gBACN,OAAO;AACV,aAAA;YACD,IAAI,GAAG,IAAI,CAAC;YACZ,WAAW,CAAC,KAAK,CAAC,CAAC;SACtB,EAAE,UAAS,MAAM,EAAA;AACd,YAAA,IAAI,IAAI,EAAE;gBACN,OAAO;AACV,aAAA;YACD,IAAI,GAAG,IAAI,CAAC;YACZ,UAAU,CAAC,MAAM,CAAC,CAAC;AACvB,SAAC,CAAC,CAAC;AACN,KAAA;AAAC,IAAA,OAAO,EAAE,EAAE;AACT,QAAA,IAAI,IAAI,EAAE;YACN,OAAO;AACV,SAAA;QACD,IAAI,GAAG,IAAI,CAAC;QACZ,UAAU,CAAC,EAAE,CAAC,CAAC;AAClB,KAAA;AACL,CAAC;AAED,SAAS,MAAM,CAAC,QAAQ,EAAA;IACpB,IAAI,EAAE,GAAG,IAAI,CAAC;AACd,IAAA,IAAI,IAAI,CAAC,MAAM,KAAK,IAAI,EAAE;AACtB,QAAA,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;QAC/B,OAAO;AACV,KAAA;AACD,IAAA,IAAI,CAAC,YAAA;QACD,IAAI,EAAE,EAAE,GAAG,CAAC;AACZ,QAAA,EAAE,GAAG,EAAE,CAAC,MAAM,GAAG,QAAQ,CAAC,WAAW,GAAG,QAAQ,CAAC,UAAU,CAAC;QAC5D,IAAI,EAAE,KAAK,IAAI,EAAE;YACb,CAAC,EAAE,CAAC,MAAM,GAAG,QAAQ,CAAC,OAAO,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC;YAC5D,OAAO;AACV,SAAA;QACD,IAAI;AACA,YAAA,GAAG,GAAG,EAAE,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;AACvB,SAAA;AACD,QAAA,OAAO,CAAC,EAAE;AACN,YAAA,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;YACnB,OAAO;AACV,SAAA;AACD,QAAA,QAAQ,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AAC1B,KAAC,CAAC,CAAC;AACP,CAAC;AAGD,SAAS,MAAM,GAAA;IACX,IAAI,CAAC,EAAE,GAAG,CAAC;;AAEX,IAAA,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,IAAI,CAAC,UAAU,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;AACpD,QAAA,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AACzC,KAAA;AACD,IAAA,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC;AAC3B,CAAC;AAED,SAAS,MAAM,CAAC,QAAQ,EAAA;AACpB,IAAA,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;AACpB,IAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;AACvB,IAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACtB,CAAC;AAED,SAAS,OAAO,CAAC,QAAQ,EAAA;AACrB,IAAA,IAAI;QACA,IAAI,QAAQ,KAAK,IAAI,EAAE;AACnB,YAAA,MAAM,IAAI,SAAS,CAAC,2CAA2C,CAAC,CAAC;AACpE,SAAA;AACD,QAAA,IAAI,QAAQ,KAAK,OAAO,QAAQ,KAAK,QAAQ,IAAI,OAAO,QAAQ,KAAK,UAAU,CAAC,EAAE;AAC9E,YAAA,IAAI,IAAI,GAAG,QAAQ,CAAC,IAAI,CAAC;AACzB,YAAA,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;gBAC5B,SAAS,CAAC,IAAI,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;gBACzE,OAAO;AACV,aAAA;AACJ,SAAA;AACD,QAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,QAAA,IAAI,CAAC,MAAM,GAAG,QAAQ,CAAC;AACvB,QAAA,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACrB,KAAA;AAAC,IAAA,OAAO,CAAC,EAAE;AAAE,QAAA,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;AAAE,KAAA;AACzC,CAAC;AAED;;;;;;AAMG;AACG,SAAU,YAAY,CAAI,EAAsF,EAAA;AAClH,IAAA,IAAI,OAAO,IAAI,KAAK,QAAQ,EAAE;AAC1B,QAAA,MAAM,IAAI,SAAS,CAAC,sCAAsC,CAAC,CAAC;AAC/D,KAAA;AACD,IAAA,IAAI,OAAO,EAAE,KAAK,UAAU,EAAE;AAC1B,QAAA,MAAM,IAAI,SAAS,CAAC,gBAAgB,CAAC,CAAC;AACzC,KAAA;AACD,IAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,IAAA,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;AACnB,IAAA,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;AAErB,IAAA,SAAS,CAAC,EAAE,EAAE,IAAI,CAAC,OAAO,EAAE,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;AAC3D,CAAC;AAGD,SAAS,OAAO,CAAC,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,EAAA;AACrD,IAAA,IAAI,CAAC,WAAW,GAAG,OAAO,WAAW,KAAK,UAAU,GAAG,WAAW,GAAG,IAAI,CAAC;AAC1E,IAAA,IAAI,CAAC,UAAU,GAAG,OAAO,UAAU,KAAK,UAAU,GAAG,UAAU,GAAG,IAAI,CAAC;AACvE,IAAA,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,IAAA,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;AACzB,CAAC;AAGD,YAAY,CAAC,SAAS,CAAC,OAAO,CAAC,GAAG,UAAS,UAAU,EAAA;IACjD,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;AACvC,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,WAAW,EAAE,UAAU,EAAA;IAC1D,MAAM,EAAE,GAAG,IAAI,CAAC;AAChB,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;AAC5C,QAAA,MAAM,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,OAAO,CAAC,WAAW,EAAE,UAAU,EAAE,OAAO,EAAE,MAAM,CAAC,CAAC,CAAC;AAC3E,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,GAAG,GAAG,UAAS,QAAQ,EAAA;AAC1C,IAAA,IAAI,IAAI,GAAG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,KAAK,CAAC,IAAI,OAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,GAAG,SAAS,CAAC,CAAC;AAE1G,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;AAC5C,QAAA,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE;AACnB,YAAA,OAAO,OAAO,CAAC,EAAE,CAAC,CAAC;AACtB,SAAA;AACD,QAAA,IAAI,SAAS,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,CAAC;AAC/B,QAAA,SAAS,GAAG,CAAC,CAAC,EAAE,GAAG,EAAA;YACf,IAAI;AACA,gBAAA,IAAI,GAAG,KAAK,OAAO,GAAG,KAAK,QAAQ,IAAI,OAAO,GAAG,KAAK,UAAU,CAAC,EAAE;AAC/D,oBAAA,IAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AACpB,oBAAA,IAAI,OAAO,IAAI,KAAK,UAAU,EAAE;wBAC5B,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,UAAS,GAAG,IAAI,GAAG,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;wBACvD,OAAO;AACV,qBAAA;AACJ,iBAAA;AACD,gBAAA,IAAI,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;;AAGd,gBAAA,IAAI,EAAE,SAAS,KAAK,CAAC,EAAE;oBACnB,OAAO,CAAC,IAAI,CAAC,CAAC;AACjB,iBAAA;AACJ,aAAA;AAAC,YAAA,OAAO,EAAE,EAAE;gBACT,MAAM,CAAC,EAAE,CAAC,CAAC;AACd,aAAA;SACJ;AACD,mCAAmC,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACjE,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;AACnB,SAAA;AACL,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,OAAO,GAAG,UAAS,KAAK,EAAA;AAC3C,IAAA,IAAI,KAAK,IAAI,OAAO,KAAK,KAAK,QAAQ,IAAI,KAAK,CAAC,WAAW,KAAK,YAAY,EAAE;AAC1E,QAAA,OAAO,KAAK,CAAC;AAChB,KAAA;AAED,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAA;QACpC,OAAO,CAAC,KAAK,CAAC,CAAC;AACnB,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,KAAK,EAAA;;AAE1C,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;QAC5C,MAAM,CAAC,KAAK,CAAC,CAAC;AAClB,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,MAAM,EAAA;AACzC,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;QAC5C,IAAI,CAAC,EAAE,GAAG,CAAC;;AAEX,QAAA,KAAK,CAAC,GAAG,CAAC,EAAE,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC3C,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AACnC,SAAA;AACL,KAAC,CAAC,CAAC;AACP,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,MAAM,GAAG,UAAS,WAAW,EAAA;IAChD,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;AAC/C,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,WAAW,EAAA;AAC9C,IAAA,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAClC,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,IAAI,GAAG,UAAS,UAAU,EAAA;IAC7C,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;AACvC,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,OAAO,GAAG,YAAA;AAC7B,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC,CAAC;AAEF,YAAY,CAAC,SAAS,CAAC,QAAQ,GAAG,YAAA;AAC9B,IAAA,OAAO,IAAI,CAAC;AAChB,CAAC;;ACxPD;AAgCA;;;;;;;;;;;;AAYG;AACa,SAAA,IAAI,CAAI,KAAQ,EAAE,OAAe,EAAA;;AAE7C,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;AAC5C,QAAA,IAAIG,UAAsB,CAAC,KAAK,CAAC,EAAE;YAC/B,MAAM,QAAQ,GAAG,EAAE,CAAC;;AAEpB,YAAA,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBACvC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/B,aAAA;AACD,YAAA,MAAM,GAAG,GAAG,KAAK,CAAC,KAAK,CAAC,OAAO,IAAI,IAAI,EAAE,QAAQ,CAAC,CAAC;YACnD,OAAO,CAAC,GAAG,CAAC,CAAC;AAChB,SAAA;AAAM,aAAA;YACH,OAAO,CAAC,KAAK,CAAC,CAAC;AAClB,SAAA;AACL,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;AAEG;AACG,SAAU,cAAc,CAAI,KAAQ,EAAA;AACtC,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;;QAE5C,MAAM,CAAC,KAAK,CAAC,CAAC;AAClB,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;;AAGG;AACa,SAAA,aAAa,CAAI,OAAuB,EAAE,KAAwB,EAAA;AAC9E,IAAA,OAAO,OAAO,CAAC,IAAI,CAAC,UAAS,IAAI,EAAA;AAC7B,QAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;AAC5C,YAAA,IAAI,KAAK,CAAC,IAAI,CAAC,EAAE;gBACb,OAAO,CAAC,IAAI,CAAC,CAAC;AACjB,aAAA;AAAM,iBAAA;gBACH,MAAM,CAAC,IAAI,CAAC,CAAC;AAChB,aAAA;AACL,SAAC,CAAC,CAAC;AACP,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;AAEG;AACG,SAAU,MAAM,CAAI,OAAuB,EAAA;AAC7C,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAA;AACpC,QAAA,OAAO,CAAC,IAAI,CAAC,UAAS,KAAK,EAAA;AACvB,YAAA,OAAO,CAAC;AACJ,gBAAA,KAAK,EAAE,WAAW;AAClB,gBAAA,IAAI,EAAE,KAAK;AACd,aAAA,CAAC,CAAC;AACP,SAAC,EAAE,YAAA;AACC,YAAA,OAAO,CAAC;AACJ,gBAAA,KAAK,EAAE,UAAU;AACpB,aAAA,CAAC,CAAC;AACP,SAAC,CAAC,CAAC;AACP,KAAC,CAAC,CAAC;AACP,CAAC;AAED;;AAEG;AACa,SAAA,eAAe,CAAI,OAAuB,EAAE,KAAwB,EAAA;AAChF,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;;AAE5C,QAAA,OAAO,CAAC,IAAI,CAAC,UAAS,IAAI,EAAA;AACtB,YAAA,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC,CAAC;AACzB,SAAC,EAAE,YAAA;YACC,OAAO,CAAC,KAAK,CAAC,CAAC;AACnB,SAAC,CAAC,CAAC;AACP,KAAC,CAAC,CAAC;AACP,CAAC;AAQD;;;;AAIG;AACa,SAAA,cAAc,CAAO,aAA6B,EAAE,QAA8B,EAAA;AAC9F,IAAA,OAAO,aAAa;SACf,IAAI,CAAC,UAAS,IAAI,EAAA;QACf,IAAI,QAAQ,CAAC,SAAS,EAAE;AACpB,YAAA,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,IAAI,CAAC,EAAE;AAC3B,gBAAA,MAAM,IAAI,KAAK,CAAC,qBAAqB,GAAG,IAAI,CAAC,CAAC;AACjD,aAAA;AACJ,SAAA;AACD,QAAA,OAAO,IAAI,CAAC;AAChB,KAAC,CAAC;SACD,IAAI,CAAC,UAAS,IAAI,EAAA;AACf,QAAA,OAAO,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;AAClC,KAAC,CAAC,CAAC;AACX,CAAC;AAED;;AAEG;AACG,SAAU,SAAS,CAAI,OAAuB,EAAA;AAChD,IAAA,OAAO,IAAI,YAAY,CAAC,UAAS,OAAO,EAAE,MAAM,EAAA;AAC5C,QAAA,OAAO,CAAC,IAAI,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;AAClC,KAAC,CAAC,CAAC;AACP;;ACzJA;;;;AAIG;AACH;;;;AAIG;AACG,SAAU,gBAAgB,CAAC,OAAO,EAAA;AACpC,IAAA,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;AACjB,QAAA,OAAO,CAAC,MAAM,GAAG,UAAS,WAAW,EAAA;YACjC,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,WAAW,CAAC,CAAC;AAC/C,SAAC,CAAC;AACL,KAAA;AACD,IAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;AACf,QAAA,OAAO,CAAC,IAAI,GAAG,UAAS,WAAW,EAAA;AAC/B,YAAA,OAAO,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;AAClC,SAAC,CAAC;AACL,KAAA;AACD,IAAA,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE;AACf,QAAA,OAAO,CAAC,IAAI,GAAG,UAAS,UAAU,EAAA;YAC9B,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI,EAAE,UAAU,CAAC,CAAC;AACvC,SAAC,CAAC;AACL,KAAA;AACD,IAAA,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE;QACnB,OAAO,CAAC,QAAQ,GAAG,YAAA;AACf,YAAA,OAAO,IAAI,CAAC;AAChB,SAAC,CAAC;AACL,KAAA;AACD,IAAA,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE;QAClB,OAAO,CAAC,OAAO,GAAG,YAAA;AACd,YAAA,OAAO,IAAI,CAAC;AAChB,SAAC,CAAC;AACL,KAAA;AACD,IAAA,OAAO,OAAO,CAAC;AACnB;;ACrCA;;AAEG;;;;"}